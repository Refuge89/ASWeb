<?php
//REP

$RepMap[1] = "PLAYER, Human";
$RepMap[2] = "PLAYER, Orc";
$RepMap[3] = "PLAYER, Dwarf";
$RepMap[4] = "PLAYER, Night Elf";
$RepMap[5] = "PLAYER, Undead";
$RepMap[6] = "PLAYER, Tauren ";
$RepMap[7] = "Creature";
$RepMap[8] = "PLAYER, Gnome";
$RepMap[9] = "PLAYER, Troll";
$RepMap[14] = "Monster";
$RepMap[15] = "Defias Brotherhood";
$RepMap[16] = "Gnoll - Riverpaw";
$RepMap[17] = "Gnoll - Redridge";
$RepMap[18] = "Gnoll - Shadowhide";
$RepMap[19] = "Murloc";
$RepMap[20] = "Undead, Scourge";
$RepMap[21] = "Booty Bay";
$RepMap[22] = "Beast - Spider";
$RepMap[23] = "Beast - Boar";
$RepMap[24] = "Worgen";
$RepMap[25] = "Kobold";
$RepMap[26] = "Troll, Bloodscalp";
$RepMap[27] = "Troll, Skullsplitter";
$RepMap[28] = "Prey";
$RepMap[29] = "Beast - Wolf";
$RepMap[30] = "Defias Brotherhood Traitor";
$RepMap[31] = "Friendly";
$RepMap[32] = "Trogg";
$RepMap[33] = "Troll, Frostmane";
$RepMap[34] = "Orc, Blackrock";
$RepMap[35] = "Villian";
$RepMap[36] = "Victim";
$RepMap[37] = "Beast - Bear";
$RepMap[38] = "Ogre";
$RepMap[39] = "Kurzen's Mercenaries";
$RepMap[40] = "Escortee";
$RepMap[41] = "Venture Company";
$RepMap[42] = "Beast - Raptor";
$RepMap[43] = "Basilisk";
$RepMap[44] = "Dragonflight, Green";
$RepMap[45] = "Lost Ones";
$RepMap[46] = "Blacksmithing - Armorsmithing";
$RepMap[47] = "Ironforge";
$RepMap[48] = "Dark Iron Dwarves";
$RepMap[49] = "Human, Night Watch";
$RepMap[50] = "Dragonflight, Red";
$RepMap[51] = "Gnoll - Mosshide";
$RepMap[52] = "Orc, Dragonmaw";
$RepMap[53] = "Gnome - Leper";
$RepMap[54] = "Gnomeregan Exiles";
$RepMap[55] = "Leopard";
$RepMap[56] = "Scarlet Crusade";
$RepMap[57] = "Gnoll - Rothide";
$RepMap[58] = "Beast - Gorilla";
$RepMap[59] = "Thorium Brotherhood";
$RepMap[60] = "Naga";
$RepMap[61] = "Dalaran";
$RepMap[62] = "Forlorn Spirit";
$RepMap[63] = "Darkhowl";
$RepMap[64] = "Grell";
$RepMap[65] = "Furbolg";
$RepMap[66] = "Horde Generic";
$RepMap[67] = "Horde";
$RepMap[68] = "Undercity";
$RepMap[69] = "Darnassus";
$RepMap[70] = "Syndicate";
$RepMap[71] = "Hillsbrad Militia";
$RepMap[72] = "Stormwind";
$RepMap[73] = "Demon";
$RepMap[74] = "Elemental";
$RepMap[75] = "Spirit";
$RepMap[76] = "Orgrimmar";
$RepMap[77] = "Treasure";
$RepMap[78] = "Gnoll - Mudsnout";
$RepMap[79] = "HIllsbrad, Southshore Mayor";
$RepMap[80] = "Dragonflight, Black";
$RepMap[81] = "Thunder Bluff";
$RepMap[82] = "Troll, Witherbark";
$RepMap[83] = "Leatherworking - Elemental";
$RepMap[84] = "Quilboar, Razormane";
$RepMap[85] = "Quilboar, Bristleback";
$RepMap[86] = "Leatherworking - Dragonscale";
$RepMap[87] = "Bloodsail Buccaneers";
$RepMap[88] = "Blackfathom";
$RepMap[89] = "Makrura";
$RepMap[90] = "Centaur, Kolkar";
$RepMap[91] = "Centaur, Galak";
$RepMap[92] = "Gelkis Clan Centaur";
$RepMap[93] = "Magram Clan Centaur";
$RepMap[94] = "Maraudine";
$RepMap[108] = "Theramore";
$RepMap[109] = "Quilboar, Razorfen";
$RepMap[110] = "Quilboar, Razormane 2";
$RepMap[111] = "Quilboar, Deathshead";
$RepMap[128] = "Enemy";
$RepMap[148] = "Ambient";
$RepMap[168] = "Nethergarde Caravan";
$RepMap[169] = "Steamwheedle Cartel";
$RepMap[189] = "Alliance Generic";
$RepMap[209] = "Nethergarde";
$RepMap[229] = "Wailing Caverns";
$RepMap[249] = "Silithid";
$RepMap[269] = "Silvermoon Remnant";
$RepMap[270] = "Zandalar Tribe";
$RepMap[289] = "Blacksmithing - Weaponsmithing";
$RepMap[309] = "Scorpid";
$RepMap[310] = "Beast - Bat";
$RepMap[311] = "Titan";
$RepMap[329] = "Taskmaster Fizzule";
$RepMap[349] = "Ravenholdt";
$RepMap[369] = "Gadgetzan";
$RepMap[389] = "Gnomeregan Bug";
$RepMap[409] = "Harpy";
$RepMap[429] = "Burning Blade";
$RepMap[449] = "Shadowsilk Poacher";
$RepMap[450] = "Searing Spider";
$RepMap[469] = "Alliance";
$RepMap[470] = "Ratchet";
$RepMap[471] = "Wildhammer Clan";
$RepMap[489] = "Goblin, Dark Iron Bar Patron";
$RepMap[509] = "The League of Arathor";
$RepMap[510] = "The Defilers";
$RepMap[511] = "Giant";
$RepMap[529] = "Argent Dawn";
$RepMap[530] = "Darkspear Trolls";
$RepMap[531] = "Dragonflight, Bronze";
$RepMap[532] = "Dragonflight, Blue";
$RepMap[549] = "Leatherworking - Tribal";
$RepMap[550] = "Engineering - Goblin";
$RepMap[551] = "Engineering - Gnome";
$RepMap[569] = "Blacksmithing - Hammersmithing";
$RepMap[570] = "Blacksmithing - Axesmithing";
$RepMap[571] = "Blacksmithing - Swordsmithing";
$RepMap[572] = "Troll, Vilebranch";
$RepMap[573] = "Southsea Freebooters";
$RepMap[574] = "Caer Darrow";
$RepMap[575] = "Furbolg, Uncorrupted";
$RepMap[576] = "Timbermaw Hold";
$RepMap[577] = "Everlook";
$RepMap[589] = "Wintersaber Trainers";
$RepMap[609] = "Cenarion Circle";
$RepMap[629] = "Shatterspear Trolls";
$RepMap[630] = "Ravasaur Trainers";
$RepMap[649] = "Majordomo Executus";
$RepMap[669] = "Beast - Carrion Bird";
$RepMap[670] = "Beast - Cat";
$RepMap[671] = "Beast - Crab";
$RepMap[672] = "Beast - Crocilisk";
$RepMap[673] = "Beast - Hyena";
$RepMap[674] = "Beast - Owl";
$RepMap[675] = "Beast - Scorpid";
$RepMap[676] = "Beast - Tallstrider";
$RepMap[677] = "Beast - Turtle";
$RepMap[678] = "Beast - Wind Serpent";
$RepMap[679] = "Training Dummy";
$RepMap[689] = "Dragonflight, Black - Bait";
$RepMap[709] = "Battleground Neutral";
$RepMap[729] = "Frostwolf Clan";
$RepMap[730] = "Stormpike Guard";
$RepMap[749] = "Hydraxian Waterlords";
$RepMap[750] = "Sulfuron Firelords";
$RepMap[769] = "Gizlock's Dummy";
$RepMap[770] = "Gizlock's Charm";
$RepMap[771] = "Gizlock";
$RepMap[789] = "Moro'gai";
$RepMap[790] = "Spirit Guide - Alliance";
$RepMap[809] = "Shen'dralar";
$RepMap[829] = "Ogre (Captain Kromcrush)";
$RepMap[849] = "Spirit Guide - Horde";
$RepMap[869] = "Jaedenar";
$RepMap[889] = "Warsong Outriders";
$RepMap[890] = "Silverwing Sentinels";
$RepMap[891] = "Alliance Forces";
$RepMap[892] = "Horde Forces";
$RepMap[893] = "Revantusk Trolls";
$RepMap[909] = "Darkmoon Faire";
$RepMap[910] = "Brood of Nozdormu";
$RepMap[911] = "Silvermoon City";
$RepMap[912] = "Might of Kalimdor";
$RepMap[914] = "PLAYER, Blood Elf";
$RepMap[915] = "Armies of C'Thun";
$RepMap[916] = "Silithid Attackers";
$RepMap[917] = "The Ironforge Brigade";
$RepMap[918] = "RC Enemies";
$RepMap[919] = "RC Objects";
$RepMap[920] = "Red";
$RepMap[921] = "Blue";
$RepMap[922] = "Tranquillien";
$RepMap[923] = "Farstriders";
$RepMap[924] = "DEPRECATED";
$RepMap[925] = "Sunstriders";
$RepMap[926] = "Magister's Guild";
$RepMap[927] = "PLAYER, Draenei";
$RepMap[928] = "Scourge Invaders";
$RepMap[929] = "Bloodmaul Clan";
$RepMap[930] = "Exodar";
$RepMap[931] = "Test Faction (not a real faction)";
$RepMap[932] = "The Aldor";
$RepMap[933] = "The Consortium";
$RepMap[934] = "The Scryers";
$RepMap[935] = "The Sha'tar";
$RepMap[936] = "Shattrath City";
$RepMap[937] = "Troll, Forest";
$RepMap[938] = "The Omenai";
$RepMap[939] = "DEPRECATED";
$RepMap[940] = "The Sons of Lothar";
$RepMap[941] = "The Mag'har";
$RepMap[942] = "Cenarion Expedition";
$RepMap[943] = "Fel Orc";
$RepMap[944] = "Fel Orc Ghost";
$RepMap[945] = "Sons of Lothar Ghosts";
$RepMap[946] = "Honor Hold";
$RepMap[947] = "Thrallmar";
$RepMap[948] = "Test Faction 2";
$RepMap[949] = "Test Faction 1";
$RepMap[950] = "ToWoW - Flag";
$RepMap[951] = "ToWoW - Flag Trigger Alliance (DND)";
$RepMap[952] = "Test Faction 3";
$RepMap[953] = "Test Faction 4";
$RepMap[954] = "ToWoW - Flag Trigger Horde (DND)";
$RepMap[955] = "Broken";
$RepMap[956] = "Ethereum";
$RepMap[957] = "Earth Elemental";
$RepMap[958] = "Fighting Robots";
$RepMap[959] = "Actor Good";
$RepMap[960] = "Actor Evil";
$RepMap[961] = "Stillpine Furbolg";
$RepMap[962] = "Crazed Owlkin";
$RepMap[963] = "Chess Alliance";
$RepMap[964] = "Chess Horde";
$RepMap[965] = "Monster Spar";
$RepMap[966] = "Monster Spar Buddy";
$RepMap[967] = "The Violet Eye";
$RepMap[968] = "Sunhawks";
$RepMap[969] = "Hand of Argus";
$RepMap[970] = "Sporeggar";
$RepMap[971] = "Fungal Giant";
$RepMap[972] = "Spore Bat";
$RepMap[973] = "Monster, Predator";
$RepMap[974] = "Monster, Prey";
$RepMap[975] = "Void Anomaly";
$RepMap[976] = "Hyjal Defenders";
$RepMap[977] = "Hyjal Invaders";
$RepMap[978] = "Kurenai";
$RepMap[979] = "Earthen Ring";
$RepMap[980] = "The Burning Crusade";
$RepMap[981] = "Arakkoa";
$RepMap[982] = "Zangarmarsh Banner (Alliance)";
$RepMap[983] = "Zangarmarsh Banner (Horde)";
$RepMap[984] = "Zangarmarsh Banner (Neutral)";
$RepMap[985] = "Caverns of Time - Thrall";
$RepMap[986] = "Caverns of Time - Durnholde";
$RepMap[987] = "Caverns of Time - Southshore Guards";
$RepMap[988] = "Shadow Council Covert";
$RepMap[989] = "Keepers of Time";
$RepMap[990] = "The Scale of the Sands";
$RepMap[991] = "Dark Portal Defender, Alliance";
$RepMap[992] = "Dark Portal Defender, Horde";
$RepMap[993] = "Dark Portal Attacker, Legion";
$RepMap[994] = "Inciter Trigger";
$RepMap[995] = "Inciter Trigger 2";
$RepMap[996] = "Inciter Trigger 3";
$RepMap[997] = "Inciter Trigger 4";
$RepMap[998] = "Inciter Trigger 5";
$RepMap[999] = "Mana Creature";
$RepMap[1000] = "Khadgar's Servant";
$RepMap[1001] = "Bladespire Clan";
$RepMap[1002] = "Ethereum Sparbuddy";
$RepMap[1003] = "Protectorate";
$RepMap[1004] = "Arcane Annihilator (DNR)";
$RepMap[1005] = "Friendly, Hidden";
$RepMap[1006] = "Kirin'Var - Dathric";
$RepMap[1007] = "Kirin'Var - Belmara";
$RepMap[1008] = "Kirin'Var - Luminrath";
$RepMap[1009] = "Kirin'Var - Cohlien";
$RepMap[1010] = "Servant of Illidan";
$RepMap[1011] = "Lower City";
$RepMap[1012] = "Ashtongue Deathsworn";
$RepMap[1013] = "Spirits of Shadowmoon 1";
$RepMap[1014] = "Spirits of Shadowmoon 2";
$RepMap[1015] = "Netherwing";
$RepMap[1016] = "Wyrmcult";
$RepMap[1017] = "Treant";
$RepMap[1018] = "Leotheras Demon I";
$RepMap[1019] = "Leotheras Demon II";
$RepMap[1020] = "Leotheras Demon III";
$RepMap[1021] = "Leotheras Demon IV";
$RepMap[1022] = "Leotheras Demon V";
$RepMap[1023] = "Azaloth";
$RepMap[1024] = "Rock Flayer";
$RepMap[1025] = "Flayer Hunter";
$RepMap[1026] = "Shadowmoon Shade";
$RepMap[1027] = "Legion Communicator";
$RepMap[1028] = "Ravenswood Ancients";
$RepMap[1029] = "Chess, Friendly to All Chess";
$RepMap[1030] = "Black Temple Gates - Illidari";
$RepMap[1031] = "Sha'tari Skyguard";
$RepMap[1032] = "Area 52";
$RepMap[1033] = "Maiev";
$RepMap[1034] = "Skettis Shadowy Arakkoa";
$RepMap[1035] = "Skettis Arakkoa";
$RepMap[1036] = "Dragonmaw Enemy";
$RepMap[1037] = "Alliance Vanguard";
$RepMap[1038] = "Ogri'la";
$RepMap[1039] = "Ravager";
$RepMap[1040] = "REUSE";
$RepMap[1041] = "Frenzy";
$RepMap[1042] = "Skyguard Enemy";
$RepMap[1043] = "Skunk, Petunia";
$RepMap[1044] = "Theramore Deserter";
$RepMap[1045] = "Vrykul";
$RepMap[1046] = "Northsea Pirates";
$RepMap[1047] = "Tuskarr";
$RepMap[1048] = "UNUSED";
$RepMap[1049] = "Troll, Amani";
$RepMap[1050] = "Valiance Expedition";
$RepMap[1051] = "UNUSED";
$RepMap[1052] = "Horde Expedition";
$RepMap[1053] = "Westguard";
$RepMap[1054] = "Spotted Gryphon";
$RepMap[1055] = "Tamed Plaguehound";
$RepMap[1056] = "Vrykul (Ancient Spirit 1)";
$RepMap[1057] = "Vrykul (Ancient Siprit 2)";
$RepMap[1058] = "Vrykul (Ancient Siprit 3)";
$RepMap[1059] = "CTF - Flag - Alliance";
$RepMap[1060] = "Test";
$RepMap[1061] = "vrykul";
$RepMap[1062] = "Vrykul Gladiator";
$RepMap[1063] = "Valgarde Combatant";
$RepMap[1064] = "The Taunka";
$RepMap[1065] = "Monster, Zone Force Reaction 1";
$RepMap[1066] = "Monster, Zone Force Reaction 2";
$RepMap[1067] = "The Hand of Vengeance";
$RepMap[1068] = "Explorers' League";
$RepMap[1069] = "Ram Racing Powerup DND";
$RepMap[1070] = "Ram Racing Trap DND";
$RepMap[1071] = "Craig's Squirrels";
$RepMap[1072] = "REUSE";
$RepMap[1073] = "The Kalu'ak";
$RepMap[1074] = "Holiday - Water Barrel";
$RepMap[1075] = "Holiday - Generic";
$RepMap[1076] = "Iron Dwarves";
$RepMap[1077] = "Shattered Sun Offensive";
$RepMap[1078] = "Fighting Vanity Pet";
$RepMap[1079] = "Murloc, Winterfin";
$RepMap[1080] = "Friendly, Force Reaction";
$RepMap[1081] = "Object, Force Reaction";
$RepMap[1082] = "REUSE";
$RepMap[1083] = "REUSE";
$RepMap[1084] = "Vrykul, Sea";
$RepMap[1085] = "Warsong Offensive";
$RepMap[1086] = "Poacher";
$RepMap[1087] = "Holiday Monster";
$RepMap[1088] = "Furbolg, Redfang";
$RepMap[1089] = "Furbolg, Frostpaw";
$RepMap[1090] = "Kirin Tor";
$RepMap[1091] = "The Wyrmrest Accord";
$RepMap[1092] = "Azjol-Nerub";
$RepMap[1093] = "REUSE";
$RepMap[1094] = "The Silver Covenant";
$RepMap[1095] = "Grizzly Hills Trapper";
$RepMap[1096] = "REUSE";
$RepMap[1097] = "Wrath of the Lich King";
$RepMap[1098] = "Knights of the Ebon Blade";
$RepMap[1099] = "Wrathgate Scourge";
$RepMap[1100] = "Wrathgate Alliance";
$RepMap[1101] = "Wrathgate Horde";
$RepMap[1102] = "CTF - Flag - Horde";
$RepMap[1103] = "CTF - Flag - Neutral";
$RepMap[1104] = "Frenzyheart Tribe";
$RepMap[1105] = "The Oracles";
$RepMap[1106] = "Argent Crusade";
$RepMap[1107] = "Troll, Drakkari";
$RepMap[1108] = "CoT Arthas";
$RepMap[1109] = "CoT Stratholme Citizen";
$RepMap[1110] = "CoT Scourge";
$RepMap[1111] = "Freya";
$RepMap[1112] = "Mount - Taxi - Alliance";
$RepMap[1113] = "Mount - Taxi - Horde";
$RepMap[1114] = "Mount - Taxi - Neutral";
$RepMap[1115] = "Elemental, Water";
$RepMap[1116] = "Elemental, Air";
$RepMap[1117] = "Sholazar Basin";
$RepMap[1118] = "Classic";
$RepMap[1119] = "The Sons of Hodir";
$RepMap[1120] = "Iron Giants";
$RepMap[1121] = "Frost Vrykul";
$RepMap[1122] = "Earthen";
$RepMap[1123] = "Monster Referee";
$RepMap[1124] = "The Sunreavers";
$RepMap[1125] = "Hyldsmeet";
$RepMap[1126] = "The Frostborn";
$RepMap[1127] = "Orgrimmar (Alex Test)";
$RepMap[1136] = "Tranquillien Conversion";
$RepMap[1137] = "Wintersaber Conversion";
$RepMap[1145] = "Hates Everything";
$RepMap[1154] = "Silver Covenant Conversion";
$RepMap[1155] = "Sunreavers Conversion";
$RepMap[1156] = "The Ashen Verdict";
$RepMap[1159] = "CTF - Flag - Alliance 2";
$RepMap[1160] = "CTF - Flag - Horde 2";
$RepMap = array_flip($RepMap);

$SkillMap[1] = "Epic";
$SkillMap[21] = "REUSE - old wailing caverns";
$SkillMap[22] = "Seasonal";
$SkillMap[23] = "REUSE - old undercity one";
$SkillMap[24] = "Herbalism";
$SkillMap[25] = "Battlegrounds";
$SkillMap[41] = "REUSE - old uldaman";
$SkillMap[61] = "Warlock";
$SkillMap[81] = "Warrior";
$SkillMap[82] = "Shaman";
$SkillMap[101] = "Fishing";
$SkillMap[121] = "Blacksmithing";
$SkillMap[141] = "Paladin";
$SkillMap[161] = "Mage";
$SkillMap[162] = "Rogue";
$SkillMap[181] = "Alchemy";
$SkillMap[182] = "Leatherworking";
$SkillMap[201] = "Engineering";
$SkillMap[221] = "Treasure Map";
$SkillMap[241] = "REUSE - old sunken temple";
$SkillMap[261] = "Hunter";
$SkillMap[262] = "Priest";
$SkillMap[263] = "Druid";
$SkillMap[264] = "Tailoring";
$SkillMap[284] = "Special";
$SkillMap[304] = "Cooking";
$SkillMap[324] = "First Aid";
$SkillMap[344] = "Legendary";
$SkillMap[364] = "Darkmoon Faire";
$SkillMap[365] = "Ahn'Qiraj War";
$SkillMap[366] = "Lunar Festival";
$SkillMap[367] = "Reputation";
$SkillMap[368] = "Invasion";
$SkillMap[369] = "Midsummer";
$SkillMap[370] = "Brewfest";
$SkillMap[371] = "Inscription";
$SkillMap[372] = "Death Knight";
$SkillMap[373] = "Jewelcrafting";
$SkillMap = array_flip($SkillMap);

if (!empty($_POST["dump"])) {
    $dump = $_POST["dump"];

    $arrDump = parse_ini_string($dump);

    $version = $arrDump["CHDMP_VER"] ? $arrDump["CHDMP_VER"] : "Not Found";

    if (($s = strpos($dump, '"')) !== false) {
        $dump = substr($dump, $s + 1);
        if (($e = strpos($dump, '"')) !== false) {
            $dump = substr($dump, 0, $e);
        }
    }
    $content = strrev(base64_decode(base64_decode(strrev($dump))));
    if (empty($content)) {
        die("sembrerebbe che il file abbia dei problemi! Forse e' vuoto?");
    }
    $content = str_replace("\'", "'", $content);

    echo "<h1>Contenuto originale:</h1><br><br>\n";

    echo "<b>Addon Version:</b>" . $version . "<br><br>";

    echo $content;

    echo "<h1>Comandi per porting manuale:</h1><br><br>\n";

    $json = json_decode($content, true);
    if ($json === null) {
        die("Errore nel contenuto del file: " . json_last_error_msg());
    }
    // print_r($json);

    echo "<b>Server data</b>:<br>\n";
    echo "Realmlist: {$json["ginf"]["realmlist"]}<br>\n";
    echo "Client Build: {$json["ginf"]["clientbuild"]}<br>\n";
    echo "Realm name: {$json["ginf"]["realm"]}<br>\n";

    echo "<br>";
    echo "<b>{$json["uinf"]["name"]} ({$json["uinf"]["race"]} / {$json["uinf"]["class"]}) level: {$json["uinf"]["level"]}</b><br>\n";
    echo "Char gender: {$json["uinf"]["gender"]}<br><br><br>\n";
    
    echo "<b>Character data :</b><br>\n";
    
    echo ".modify honor {$json["uinf"]["honor"]}<br>\n";
    echo ".modify arenapoints {$json["uinf"]["arenapoints"]}<br>\n";
    echo ".modify money {$json["uinf"]["money"]}<br>\n";
    echo ".levelup " . ($json["uinf"]["level"] - 1) . "<br>\n";

    echo "<br>";
    echo "<b>Inventory</b>:<br>\n";
    foreach ($json["inventory"] as $unk => &$item) {
        echo ".additem {$item["I"]} {$item["C"]}<br>\n";
    }
    echo "<br>";
    echo "<b>Pet/Mount</b>:<br>\n";
    foreach ($json["creature"] as $unk => &$spellid) {
        echo ".learn {$spellid}<br>\n";
    }
    echo "<br>";
    echo "<b>Spells</b>:<br>\n";
    foreach ($json["spells"] as $spellid => &$unk) {
        echo ".learn {$spellid}<br>\n";
    }
    echo "<br>";
    echo "<b>Reputazioni</b>:<br>\n";
    foreach ($json["rep"] as $i => &$data) {
        if (!empty($RepMap[$data["N"]])) {
            echo ".modify rep {$RepMap[$data["N"]]} {$data["V"]} <br>\n";
        }
        // else echo "REP {$data["N"]} NON TROVATA!!";
    }
    echo "<br>";
    echo "<b>Achievements</b>:<br>\n";
    foreach ($json["achiev"] as $i => &$data) {//I = id, D = timestamp
        echo ".achievement add {$data["I"]} <br>\n";
    }
    echo "<br>";
    echo "<b>Skills</b>:<br>\n";
    foreach ($json["skills"] as $i => &$data) {// .setskill #skill #level [#max]
        if (!empty($SkillMap[$data["N"]])) {
            echo ".setskill {$SkillMap[$data["N"]]} {$data["C"]} {$data["M"]} <br>\n";
        }
        // else echo $data["N"], " NOT FOUND";
    }
    echo "<br>";
    echo "<b>Currency</b>:<br>\n";
    foreach ($json["currency"] as $i => &$item) {
        if ($item["I"]) {
            echo ".additem {$item["I"]} {$item["C"]} <br>\n";
        }
    }
    echo "<br>";
    echo "<b>Glyphs</b>:<br>\n";

    function learnGlyphs($id) {
        if ($id>0)
            echo "spell: $id ( must find related item )<br>\n";
    }

    foreach ($json["glyphs"] as $i_spec => &$data) {
        learnGlyphs($data[0][0]);
        learnGlyphs($data[0][1]);
        learnGlyphs($data[0][2]);
        learnGlyphs($data[1][0]);
        learnGlyphs($data[1][1]);
        learnGlyphs($data[1][2]);
    }
} else {
    ?>
    <h1>Dump</h1>
    <form action='?' method='post'>
        <textarea name='dump' style='width:800px; height:500px'></textarea>
        <br><br><input type='submit' value='Estrai tutto!' />
    </form>
    Apri il file e copia/incolla il contenuto di CHDMP_DATA nell'area di testo.
    <?php
}
?>
<br><br>&copy; AzerothShard Staff